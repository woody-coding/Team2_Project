<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Insert title here</title>
    <style>
        section {
            width: 1200px;
            box-sizing: border-box;
            margin: 0 auto;
            display: flex; /* 플렉스박스 사용 */
            align-items: center; /* 수직 중앙 정렬 */
        }
        .sideBar {
            margin-right: 33px;
    		margin-bottom: 485px;
        }
        .contentBox {
            flex-grow: 1; /* 남은 공간을 차지하도록 설정 */
        }
        .NameBox {
            position: relative;
            width: 916px;
            height: 49px;
            margin: 27px 0 0 0;
            background: #ff9400;
            display: flex; /* 플렉스박스 사용 */
            align-items: center; /* 수직 중앙 정렬 */
            padding-left: 20px; /* 왼쪽 여백 추가 */
        }
        .detailName {
            color: #ffffff;
            font-family: Inter, var(--default-font-family);
            font-size: 20px;
            font-weight: 700;
            text-align: left; /* 왼쪽 정렬 */
        }
        .content {
            display: flex; /* 수평으로 배치 */
            flex-wrap: wrap; /* 줄 바꿈 허용 */
        }
        .showBox {
            display: flex;
            flex-direction: column; /* 수직 정렬 */
            align-items: center; /* 가운데 정렬 */
            width: 180px;
            height: 304px;
            position: relative; /* 하트 위치 조정을 위한 설정 */
            margin-right: 46px;
            margin-top: 25px;
        }
        .showImg {
            width: 180px;
            height: 250px;
            overflow: hidden; /* 자식 요소가 부모의 경계를 넘어가도록 설정 */
        }
        .show {
            width: 180px;
            height: 250px; /* 너비 설정 */
            object-fit: cover; /* 이미지 비율 유지 */
        }
        .heart {
            width: 40px;
            height: 40px;
            position: absolute;
                bottom: 64px;
    right: 8px;
            transform: translate(50%, 50%);
        }
        .showName {
            margin-top: 8px; /* 이름과 이미지 사이의 간격 추가 */
        }
        .container {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            border: 1px solid black;
            border-radius: 3px;
            padding: 10px;
        }
        .likeShowBox, .likeActorBox {
            width: 45%;
            /* 기타 스타일 */
        }
        .likeShowCount, .likeActorCount {
            margin-top: 10px;
            /* 기타 스타일 */
        }
        .divider {
            width: 1px; /* 선의 너비 */
            background-color: black; /* 선의 색상 */
            margin: 0 10px; /* 좌우 여백 */
            height: auto; /* 부모 요소의 높이에 맞춤 */
            align-self: stretch; /* 부모 요소의 높이에 맞게 늘어남 */
        }
        .userBox {
            margin-bottom: 34px;
        }
        ul {
            list-style-type: none; /* 점 제거 */
            padding: 0; /* 기본 패딩 제거 */
            margin: 0; /* 기본 마진 제거 */
            text-align: left; /* 좌측 정렬 */
            font-weight: normal; /* bold 제거 */
        }

        li {
            text-align: left; /* 좌측 정렬 */
            font-weight: bold; /* li 요소는 굵게 설정 */
            margin-bottom: 50px;
            /* 필요에 따라 추가 스타일 */
        }
        .naviContainer {
            margin-top: 35px;
        }
        .subList {
            margin-top: 10px;
        }
        .showContainer {
            display: grid;
            grid-template-columns: repeat(4, 1fr); /* 한 줄에 4개씩 */
            gap: 18.8px; /* 요소 간의 간격 */
        }
        .recommendContainer {
            position: relative;
            z-index: 1;
            margin-top: 25px;
            
        }

        .posterContainer {
            display: flex;
            align-items: center; /* 수직 가운데 정렬 */
            justify-content: center; /* 수평 가운데 정렬 */
        }
        .recommend-30 {
            position: relative;
            width: 290px;
            height: 250px;
            top: 0;
            left: 0px;
            z-index: 150;
            overflow: hidden;
            border-radius: 5px;
        }
        .background-31 {
            position: absolute;
            width: 290px;
            height: 250px;
            top: 0;
            left: 0;
            filter: blur(17.5px);
            z-index: 151;
        }
        .poster-32{
            position: relative;
            width: 110px;
            height: 150px;
            margin: 46px 0 0 22px;
            z-index: 152;
            overflow: hidden;
        }  
        ._p-33{position: absolute;
            width: 290px;
            height: 250px;
            top: 0;
            left: 0;
            background: url(68227042_20071227.jpg) no-repeat center;
            background-size: cover;
        }
        .title-value-34{
            position: absolute;
            width: 110px;
            height: 150px;
            top: 46px;
            left: 158px;
            z-index: 154;
        }
        .frame-35{
            position: absolute;
            width: 110px;
            height: 150px;
            top: 0;
            left: 0;
            font-size: 0px;
            z-index: 155;
            overflow: hidden;
        } 
        .fluttering-flowers-36{
            display: flex;
            align-items: center;
            justify-content: flex-start;
            position: relative;
            width: 92px;
            height: 51px;
            margin: 28px 0 0 9px;
            color: #ffffff;
            font-family: Inter, var(--default-font-family);
            font-size: 16px;
            font-weight: 700;
            line-height: 24px;
            text-align: left;
            letter-spacing: -0.1px;
            z-index: 156;
        }
        .price-37{
            display: block;
            position: relative;
            height: 28px;
            margin: 13px 0 0 12px;
            color: #ffffff;
            font-family: Inter, var(--default-font-family);
            font-size: 14px;
            font-weight: 700;
            line-height: 24px;
            text-align: left;
            white-space: nowrap;
            letter-spacing: -0.08px;
            z-index: 157;
        }
        ._p-38{
            position: absolute;
            width: 110px;
            height: 150px;
            top: 46px;
            left: 22px;
            background: url(68227042_20071227.jpg) no-repeat center;
            background-size: cover;
            z-index: 158;
        }
        .content {
            display: flex; /* 수평으로 배치 */
            flex-wrap: wrap; /* 줄 바꿈 허용 */
        }
        .actBox {
            display: flex;
            flex-direction: column; /* 수직 정렬 */
            align-items: center; /* 가운데 정렬 */
            width: 130px;
            position: relative; /* 하트 위치 조정을 위한 설정 */
            margin-right: 30px; /* actBox 간의 간격 추가 */
            margin-top: 25px;
        }
        .actImg {
            height: 130px; /* 높이 설정 */
            width: 130px; /* 너비 설정 */
            border-radius: 50%; /* 원형 만들기 */
            overflow: hidden; /* 자식 요소가 부모의 경계를 넘어가도록 설정 */
        }
        .actor {
            height: 130px; /* 높이 설정 */
            width: 130px; /* 너비 설정 */
            object-fit: cover; /* 이미지 비율 유지 */
        }
        .actHeart {
            width: 40px;
            height: 40px;
            position: absolute;
            bottom: 44px;
            right: 20px;
            transform: translate(50%, 50%);
        }
        .actName {
            margin-top: 8px; /* 이름과 이미지 사이의 간격 추가 */
        }
        .formFrame {
padding: 30px;
    height: auto;
    width: 80%;
    max-width: 600px;
    margin: auto;
    border-radius: 10px;
    border: 1px solid;
    margin-top: 50px;
    margin-bottom: 50px;
}

.formInput {
	width: 93%;
	padding: 10px;
	font-size: 20px;
	border: 1px solid black;
	border-radius: 5px;
	
	
}

.text {
	height: 200px;
	
	
}

.w-100 {
	width: 100%;
	padding: 10px;
}



button {
	margin: 10px;
	padding-left: 20px;
	padding-right: 20px;
	padding-top: 10px;
	padding-bottom: 10px;
	border: none;
	background-color: #ff9400;
	color: white;
	border-radius: 6px;
	font-size: 18px;
	cursor: pointer;

	
}
.formFrame {
            width: 662px; /* 너비 설정 */
            height: 828.81px; /* 높이 설정 */
            padding: 30px;
    width: 80%;
    max-width: 600px;
    margin: auto;
    border-radius: 10px;
    border: 1px solid;
    margin-top: 50px;
    margin-bottom: 50px;
        }
        button {
            width: 100%;
            padding: 10px;
            background-color: #ff9400;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <section>
        <div class="sideBar" style="width: 1014px;margin-right: 33px;margin-bottom: 446px;margin-left: -0.3px;">
            <div class="userContainer">
                <div class="userBox">
                    <span class="userName" style="font-size: 24px; font-weight: 700;" th:text="${member.memberName}">ㅇㅇㅇ</span>
                    <span class="myPage" style="font-size: 16px;font-weight: 700;">님의 마이페이지</span>
                </div>
                <div class="container">
                    <div class="likeShowBox">
                        <div class="likeShowCount">
                            <span class="likeShow" style="font-size: 18px; font-weight: bold;">찜한 공연</span>
                            <span class="likeShowCount" style="font-size: 20px; font-weight: bold;">10</span>
                        </div>
                    </div>               
                    <div class="divider"></div>
                    <div class="likeActorBox">
                        <div class="likeActorCount">
                            <span class="likeActor" style="font-size: 18px; font-weight: bold;">찜한 배우</span>
                            <span class="likeActorCount" style="font-size: 20px; font-weight: bold;" th:text="${likedActorCount}">10</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="naviContainer">
                <ul class="naviList">
                    <li class="naviList1">쇼핑 내역
                        <ul class="subList">예매 내역</ul>
                    </li>
                    <li class="naviList1"><a>라이브러리</a>
                        <ul class="subList"><a>찜한 공연</a></ul>
                        <ul class="subList"><a>찜한 배우</a></ul>
                        <ul class="subList"><a>리뷰 관리</a></ul>
                        <ul class="subList"><a>문의 내역</a></ul>
                    </li>
                    <li class="naviList1"><a>회원 정보</a>
                        <ul class="subList"><a>회원 정보 관리</a></ul>
                    </li>
                </ul>
            </div>
        </div>
        <div class="contentBox" style="margin-right: 25px;">
            <div class="NameBox">
                <span class="detailName">회원 정보</span>
            </div>
            <div class="content">
                <div class="recommendContainer" style="width: 936px;">

                    
    <div class="formFrame">
        <h2>비밀번호 확인</h2>
        <form th:action="@{/mypage/memberCheck}" method="post" id="passwordCheckForm" th:object="${mypageMemberDTO}">
        <input class="formInput" type="password" id="password" name="memberPw" required th:field="*{memberPw}">
        <input type="hidden" name="memberNo" th:value="${member.memberNo}"> <!-- memberNo를 숨기고 전송 -->
        <button type="submit" id="confirmButton" style="width: 18%;margin-left: 78.7%;">확인</button>
    </form>
    </div>
	</div>    
                </div>
            </div>
    </section>
</body>
    <script>
    document.getElementById('confirmButton').addEventListener('click', function() {
        const password = document.getElementById('password').value;
        const memberNo = 1; // 실제로는 세션에서 가져와야 할 값

        // AJAX 요청
        fetch('/mypage/memberCheck', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded' // URL 인코딩된 형식
            },
            body: new URLSearchParams({
                memberNo: memberNo,
                memberPw: memberPw // DTO 필드 이름과 일치
            })
        })
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return response.json();
        })
        .then(data => {
            if (data.success) {
                // 비밀번호 일치 시 회원 정보 페이지로 이동
                window.location.href = data.redirectUrl; // 회원 정보 수정 페이지 URL
            } else {
                alert('비밀번호가 일치하지 않습니다. 다시 시도하세요.');
            }
        })
        .catch(error => {
            console.error('Error:', error);
            alert('서버와의 연결에 문제가 발생했습니다.');
        });
    });
    </script>
</html>
